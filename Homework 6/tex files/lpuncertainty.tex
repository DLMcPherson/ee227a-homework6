\begin{exercise}[Linear Program Uncertainty]\rm
Real-world optimization problems always face uncertainty. In particular, production problems usually face uncertainty in the demand for products. Before completing this exercise, read the paper by Higle and Wallace posted on bCourses.\\
\\
We wish to maximize profit in the following production problem faced by a pharmaceutical company. We can manufacture two drugs using three ingredients, according to the following table:

\begin{center}
\begin{tabular}{l|l|l|l}
Resource & Price & Drug 1 & Drug 2\\
\hline
Ingredient 1 & \$3.50 & 3 & 1\\
\hline
Ingredient 2 & \$2.60 & 1 & 0\\
\hline
Ingredient 3 & \$6.80 & 1 & 1\\
\hline
\end{tabular}
\end{center}

A unit of Drug 1 requires 3 units of Ingredient 1, which cost \$3.50 each, and so on. Drug 1 sells for \$25 per unit, and Drug 2 sells for \$10 per unit.

\begin{enumerate}
\item First, we will assume that we know the demand ahead of time. Say there is demand for 150 units of Drug 1 and 200 units of Drug 2. Formulate the appropriate linear program to maximize profit and solve it using CVX. Report the profit achieved, the amount of each ingredient purchased, and the amount of each drug produced and sold.

\item For the rest of this problem, we will assume that there are three demand scenarios that occur with different probability:

\begin{center}
\begin{tabular}{l|l|l|l}
& Probability & Drug 1 Demand & Drug 2 Demand\\
\hline
Scenario 1 & 0.2 & 100 & 100\\
\hline
Scenario 2 & 0.5  & 150 & 200\\
\hline
Scenario 3 & 0.3 & 200 & 250\\
\hline
\end{tabular}
\end{center}
If we still know the demand ahead of time, what is the maximum expected profit we can achieve? How much of each ingredient do we purchase and how much of each drug do we produce in each scenario?

\item Production happens in three stages: first we acquire ingredients, then we produce the drugs, and finally we sell them. What if the demand remains unknown throughout resource acquisition and production, but is revealed just prior to selling? Formulate and solve a new LP that considers this uncertainty and maximizes the expected profit. Report the expected profit, the amount of each ingredient purchased, and the amount of each drug produced and sold in each scenario.
 
\item What if we still do not know the demand until after we acquire the ingredients, but it is revealed before we begin production? Formulate and solve the LP which maximizes expected profit in this scenario. Report the expected profit, the amount of each ingredient purchased, the amount of each drug produced, and the amount of each drug sold in each scenario. What is different about this solution compared to the other models? Why?

\end{enumerate}

\end{exercise}
